---
layout: post
title: "2022년 3월 1주차 주간 회고"
categories:
  - 주간 회고
tags:
  - 회고
---

---

## 총평
Image Classification 대회 마지막 주간.

비록 우수한 성적으로 마무리 하지 못하였으나, 다음 프로젝트에서 개선할 만한 점을 많이 발견하였다.

---
## 일기

### 2022년 2월 28일 월요일
오늘 또한 실시간 일기쓰기 모드에 돌입하지 못했다. 실험에 삶을 갈아넣었기 때문이다.

아침부터 팀원들과 이야기를 나누며 내가 놓치고 있던 부분들을 캐치하고, 내 관점도 이야기하는 시간을 통해 앞으로의 프로젝트 방향을 모색하였다.

그렇게 나온 개인적인 결론은 데이터부터 살펴보기였다.
코드를 꼼꼼히 살펴본 결과, 내가 셔플을 하지 않을거라 생각하고 있던 데이터셋 분할 함수가 사실 분할 전에 셔플을 진행하여 validation 셋에 train 셋의 정보가 어느정소 leak 되고 있었다.
이에 메뉴얼하게 리스트 슬라이싱을 하여 validation 셋의 독립성을 어느정도 보장해줬다.

여기에 추가로 primary 메트릭을 f1 score로 전환하여, f1 score 기준으로 베스트 모델을 저장하도록 베이스라인 코드를 손보았다.
사실상 일주일이 지나서야 제대로 된 메트릭을 손에 넣은 느낌이다.

여기에 추가로 일부 클래스 불균형을 해소하기 위해 오버샘플링을 수행하였다.
여기에 더해 랜덤성의 증가를 위하여 mixup을 구현해 적용하였다.
확실히 이렇게 하니 오버피팅이 덜 일어나고, 모델이 학습을 힘들어하는 모습이 보이고 있다.

자잘한 변수를 바꿔가며 실험할땐 상대적으로 가벼운 resnet18을 사용하였으나, 슬슬 정확도 면에서 문제를 보이고 있다.

오늘 밤엔 50으로 바꿔서 100 epoch를 돌리고 잠을 자야겠다.

---
### 2022년 3월 1일 화요일
삼일절은 휴일이지만, 대회가 한창인 부캠러에게 휴식따윈 없다. 오직 실험뿐이다.

오늘도 예상대로 아침일과도 제대로 못 하고, 실험만 주구장창 하게 되었다.

오늘은 데이터를 프로필대로 비율맞춰서 validation에 빼놓고, 나머지를 비율에 맞게 오버샘플링 하는 코드를 짜고, validation도 transform을 걸어 여러번 반복하여 20% 분량의 효과를 내게 개조하였다.

mixup의 오버피팅 방지가 꽤 효율적이나, 언더피팅 문제도 덩달아 발생하였다.
그래서 mixup과 노멀 데이터를 확률적으로 교차해서 학습시키게 되었다.
resnet18의 성능상 한계가 슬슬 체감이 되어, 오늘 밤엔 resnet50으로 lr은 극단적으로 낮추고, AdamW를 걸어서 백그라운드에 돌리고 자야겠다.
로스 함수는 오버샘플링 덕에 focal보단 cross entrophy가 유효한것 같다.

---
### 2022년 3월 2일 수요일
오늘은 사실상 대회 마지막 날이나 다름없다.
제출기한이 내일 오후 7시기에, 오늘까진 이것저것 시도해보며 앙상블에 쓸 쓸만한 모델들의 베리에이션을 늘려가고 있다.

물론 아침일과를 비롯한 자잘한 일들은 하지 못했다.
운동도 제대로 못해서 걱정이다.

조금만 더 힘내자.

---
### 2022년 3월 3일 목요일
대망의 대회 마지막날.

어제 다양한 모델과 로스함수, 변형방식을 조합한 결과물들로 앙상블을 시도했으나... 효과가 그리 좋지 않았다.

이에 대회 막바지엔 체크나 해 보자는 의미에서 젠더, 나이, 마스크 세 부분을 따로 담당하는 모델을 학습시켜 보았다.

결론적으로 나잇대 추산 말고는 다른 테스크는 너무나도 쉽게 판별하는 모습을 볼 수 있었다.

결국 나잇대를 제대로 판별시키는 모델 하나만 만들면 되는 이야기였던 것이다.

이렇게 개별적으로 모델을 만드는 방식은 곱확률의 법칙상 힘들거라 예상해 팀원들을 설득해서 안 하도록 유도했는데, 이렇게 특정 한 파트만 개선하면 되는 경우일줄은 꿈에도 몰랐다.
죄책감에 몸둘 바 모르겠다. 제대로 실험을 하고서 그걸 근거로 보여줬다면 이럴 일이 없었을 텐데.

어쨌든 대회는 끝났고, 얻은 것은 많았다. 이제 이것들을 어떻게 내 것으로 녹여낼지가 관건이다.

---
### 2022년 3월 4일 금요일
오늘은 주로 프로젝트 마무리와 상위권 팀들의 솔루션 발표회 등의 일들이 있었다.

전체적으로 그간 기록한 것들을 취합하여 앞으로의 성장 포인트를 추산하였는데, 기록의 퀄리티가 부족해서 다소 아쉬운 면이 있다.

상위권 팀들의 솔루션은 충격적이었다.
혁신적이라 충격적인게 아닌, 내가 생각만 하고 여러 이유로 보류하던 아이디어들을 거침없이 실행한 점이 충격적이었다.
정말 중요한 것은 망설임 없이 실행하는 능력이란 것을 다시금 깨달을 수 있었다.

실망만 남은 것은 아니다.
나에겐 지금 내가 하고 싶었던 것을 실행할 도구가 놓여 있다.
나는 앞으로도 더 성장할 수 있음을 다시금 확인할 수 있어 기쁘다.

---
### 2022년 3월 5일 토요일
오늘은 대회 이후 주말이지만, 여전히 Age 모델 개별구현에 미련이 생겨 서버를 통해 실험을 돌리고 있다.

그와 동시에 팀원의 코드를 깃허브에서 리뷰하는 시간을 가졌다.
확실히 남의 코드를 보니 내가 놓쳤던 것도 알 수 있어 좋은 것 같다.

오늘은 딱 이 정도의 일만 수행하였는데도 노는것과 병행하느라 시간이 금방 지나간 것 같다.
어제 마스터 세션에서 마스터님이 오늘과 내일은 공부하지 말란 취지의 조언을 해 주셨는데, 말씀대로 그냥 놀 걸 그랬다.

슬슬 대회 탓에 미뤄뒀던 추가 공부도 해야겠다.
영어, 선대, 논문읽기까지, 아직 한참 남아있으니 내일까지 차근차근 해 나가자.

---
### 2022년 3월 6일 일요일
오늘은 어제의 깨달음을 교훈 삼아 신나게 놀기만 했다.

사실 몸 컨디션이 좋지 않아 누워 지냈다.

최대한 빠르게 몸을 회복해서 내일부터 시작될 NLP 스케쥴에 지장이 없도록 노력해야겠다.
